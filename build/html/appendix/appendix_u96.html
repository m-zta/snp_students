
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta content="metadata description" lang="en" name="description" xml:lang="en" />
<meta content="description des métadonnées" lang="fr" name="description" xml:lang="fr" />
<meta content="Sphinx, MyST" name="keywords" />
<meta content="en_US" property="og:locale" />

    <title>Ultra96-V2 &#8212; MPC Labs  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="07a - Cluster Computing" href="../lab_07_cluster_computing/README.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="ultra96-v2">
<h1>Ultra96-V2<a class="headerlink" href="#ultra96-v2" title="Permalink to this headline">¶</a></h1>
<section id="introduction-ultra96-v2">
<h2>1. Introduction Ultra96-V2<a class="headerlink" href="#introduction-ultra96-v2" title="Permalink to this headline">¶</a></h2>
<p><img alt="Ultra96-V2 Block Diagram" src="../_images/u96_block.png" /></p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Component</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SoC</p></td>
<td><p>Xilinx Zynq UltraScale+ MPSoC ZU3EG A484</p></td>
</tr>
<tr class="row-odd"><td><p>RAM</p></td>
<td><p>Micron 2 GB (512M x32) LPDDR4 Memory</p></td>
</tr>
<tr class="row-even"><td><p>SD-Flash</p></td>
<td><p>Delkin 16 GB microSD card + adapter</p></td>
</tr>
<tr class="row-odd"><td><p>GUI</p></td>
<td><p>Downloadable SD card image for Linux OS with desktop environment</p></td>
</tr>
<tr class="row-even"><td><p>Networking</p></td>
<td><p>Microchip Wi-Fi / Bluetooth</p></td>
</tr>
<tr class="row-odd"><td><p>Connections</p></td>
<td><p>1x USB 3.0 Type Micro-B upstream port <br> 2x USB 3.0, 1x USB 2.0 Type A downstream ports</p></td>
</tr>
<tr class="row-even"><td><p>Expansion</p></td>
<td><p>40-pin 96Boards Low-speed expansion header <br> 60-pin 96Boards High-speed expansion header</p></td>
</tr>
<tr class="row-odd"><td><p>Graphics</p></td>
<td><p>Mini DisplayPort (MiniDP or mDP)</p></td>
</tr>
</tbody>
</table>
<section id="xilinx-zynq-ultrascale-mpsoc">
<h3>Xilinx Zynq UltraScale+ MPSoC<a class="headerlink" href="#xilinx-zynq-ultrascale-mpsoc" title="Permalink to this headline">¶</a></h3>
<p>Xilinx Zynq UltraScale+ MPSoC ZU3EG</p>
<ul class="simple">
<li><p><strong>CPU</strong>: Quad-core ARM <strong>Cortex-A5</strong></p></li>
<li><p><strong>CPU</strong>: Dual-core ARM <strong>Cortex-R5F, TCM</strong></p></li>
<li><p><strong>GPU</strong>: Mali-400 MP2</p></li>
<li><p><strong>FPGA</strong>: 154K Programmable Logic Cells</p></li>
<li><p>256KB On-Chip Memory w/ECC</p></li>
<li><p>UART</p></li>
<li><p>CAN</p></li>
<li><p>USB 2.0</p></li>
<li><p>I2C</p></li>
<li><p>SPI</p></li>
<li><p>32b GPIO</p></li>
<li><p>Real Time Clock</p></li>
<li><p>WatchDog Timers</p></li>
<li><p>Triple Timer Counter</p></li>
</ul>
</section>
<section id="ultra96-block-diagram">
<h3>Ultra96 Block Diagram<a class="headerlink" href="#ultra96-block-diagram" title="Permalink to this headline">¶</a></h3>
<p><img alt="Ultra96-V2 Block Diagram" src="../_images/u96_topology.png" /></p>
</section>
</section>
<hr class="docutils" />
<section id="setup">
<h2>2. Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<section id="prepare-sd-card">
<h3>2.1 Prepare SD card<a class="headerlink" href="#prepare-sd-card" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Download sd card image <strong>ultra96v2_v2.6.0.img</strong> from <strong><a class="reference external" href="ftp://jupiter-win.zhaw.ch/shared/">ftp://jupiter-win.zhaw.ch/shared/</a></strong> (using an FTP client or a browser, must be connected to ZHAW network) with the credentials:</p>
<ul class="simple">
<li><p>Username: mpcro</p></li>
<li><p>Password: mpcro</p></li>
</ul>
</li>
<li><p>Write image to the SD card, you can either use:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://etcher.io/">Etcher.io</a> utility</p></li>
<li><p><strong>dd</strong> on unix based systems:</p></li>
</ul>
</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># byte copy image to /dev/sdX</span>
dd <span class="k">if</span><span class="o">=</span>./ultra96v2_v2.6.0.img <span class="nv">of</span><span class="o">=</span>/dev/sdX <span class="nv">bs</span><span class="o">=</span>4M
<span class="c1"># Bytecopy with progress bar</span>
dd <span class="k">if</span><span class="o">=</span>./ultra96v2_v2.6.0.img <span class="p">|</span> pv -s 8G <span class="p">|</span> dd <span class="nv">of</span><span class="o">=</span>/dev/mmcblk0 <span class="nv">bs</span><span class="o">=</span>4M 
</pre></div>
</div>
<p>The image contains the <a class="reference external" href="http://www.pynq.io/">PYNQ</a> distribution for the Ultra96, it is an Ubuntu-based Linux OS.</p>
</section>
<section id="connect-the-ultra96">
<h3>2.2 Connect the Ultra96<a class="headerlink" href="#connect-the-ultra96" title="Permalink to this headline">¶</a></h3>
<p>Plug in the cables as shown in the figure below.</p>
<p><img alt="Ultra96-V2 connections" src="../_images/u96_pynq_setup.png" /></p>
</section>
<section id="boot-linux-from-sd-card">
<h3>2.3 Boot Linux from SD-card<a class="headerlink" href="#boot-linux-from-sd-card" title="Permalink to this headline">¶</a></h3>
<p>The SoC boot mode is configured by the <strong>SW3</strong>  DIP switch. Verify that the switch is set accordingly:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Switch</p></th>
<th class="head"><p>Position</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>OFF</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>ON</p></td>
</tr>
</tbody>
</table>
<p><img alt="Ultra96-V2 Boot Mode Switch" src="../_images/u96_sdbootmode.png" /></p>
<p>Insert SD-Card and boot by pressing the power-on switch. When done one user led blinks (Linux heartbeat).</p>
</section>
<section id="access-the-ultra96-v2">
<h3>2.4 Access the Ultra96-V2<a class="headerlink" href="#access-the-ultra96-v2" title="Permalink to this headline">¶</a></h3>
<p>The PYNQ image provides ethernet over USB and a serial connection.
Access the board either via serial:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>- 115200 baud
- 8 data bits
- 1 stop bit
- No Parity
- No Flow Control
</pre></div>
</div>
<p>Or using SSH with the credentials:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>- Username: xilinx  
- Password: xilinx  
</pre></div>
</div>
<p>The IP address is either 192.168.3.1 (when using ethernet over USB), or can be found by issuing the <code class="docutils literal notranslate"><span class="pre">ip</span> <span class="pre">address</span></code> command in a console.</p>
<p>Configure the WiFi in order to have a connection to the internet by modifying the file <em>/boot/boot.py</em> (e.g. by using <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">nano</span> <span class="pre">/boot/boot.py</span></code> ), add the following lines and insert your WiFi information.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pynq.lib</span> <span class="kn">import</span> <span class="n">Wifi</span>

<span class="n">port</span> <span class="o">=</span> <span class="n">Wifi</span><span class="p">()</span>
<span class="n">port</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">port</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;your_ssid&#39;</span><span class="p">,</span> <span class="s1">&#39;your_password&#39;</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>To reload the configuration a reboot is required <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">reboot</span></code>, after that the board should automatically connect to your network.</p>
</section>
<section id="access-the-ultra96-files">
<h3>2.5 Access the Ultra96 files<a class="headerlink" href="#access-the-ultra96-files" title="Permalink to this headline">¶</a></h3>
<p>We will use the samba share to edit the files and will compile programs using the console.<br />
To connect using Windows, type <code class="docutils literal notranslate"><span class="pre">\\192.168.3.1\xilinx</span></code> in the address bar of the file explorer and access using the same credentials as above (xilinx:xilinx). Then you can navigate the folders in the home directory (<em>/home/xilinx/</em>) and edit files using a text editor or IDE.<br />
For Linux use the URL <code class="docutils literal notranslate"><span class="pre">smb://192.168.3.1/xilinx</span></code> with your file manager.<br />
A Jupyter Notebook is availabe at <a class="reference external" href="http://192.168.3.1">http://192.168.3.1</a> (password xilinx), from here Python development is possible.</p>
</section>
</section>
<hr class="docutils" />
<section id="first-steps">
<h2>3. First steps<a class="headerlink" href="#first-steps" title="Permalink to this headline">¶</a></h2>
<section id="hello-world">
<h3>3.1 Hello, World!<a class="headerlink" href="#hello-world" title="Permalink to this headline">¶</a></h3>
<p>To compile programs we use the gcc compiler available in the distribution, in this section an example program is created and compiled. To automate compilation the make system is used by creating a <em>Makefile</em>.</p>
<ol class="arabic simple">
<li><p>Connect to the U96 via USB or WiFi</p></li>
<li><p>Open a terminal either via a serial connection or via SSH</p></li>
<li><p>Connect to the samba share to edit files with the host</p></li>
<li><p>Create a folder in the home directory and add the source file as <em>hello.c</em>, example code provided below</p></li>
<li><p>Add the Makefile, an example is provided below</p></li>
<li><p>In the console run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">hello</span></code></p></li>
<li><p>Execute the program with <code class="docutils literal notranslate"><span class="pre">./hello</span></code></p></li>
</ol>
<section id="example-code">
<h4>Example code<a class="headerlink" href="#example-code" title="Permalink to this headline">¶</a></h4>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(){</span><span class="w"></span>
<span class="w">	</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Hello, World!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">	</span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

</pre></div>
</div>
</section>
<section id="example-makefile">
<h4>Example Makefile<a class="headerlink" href="#example-makefile" title="Permalink to this headline">¶</a></h4>
<div class="highlight-make notranslate"><div class="highlight"><pre><span></span><span class="nv">CC</span><span class="o">=</span>gcc

<span class="nf">.PHONY</span><span class="o">:</span> <span class="n">hello</span>

<span class="nf">hello</span><span class="o">:</span>
	<span class="k">$(</span>CC<span class="k">)</span> -Wall hello.c -o hello
</pre></div>
</div>
<p>Further reading:</p>
<ul class="simple">
<li><p>Makefiles <a class="reference external" href="http://web.mit.edu/gnu/doc/html/make_2.html">GNU Make</a></p></li>
<li><p>GCC <a class="reference external" href="https://gcc.gnu.org/onlinedocs/gcc-7.3.0/gcc/">GCC Doc</a></p></li>
</ul>
</section>
</section>
<section id="useful-programs">
<h3>3.2 Useful programs<a class="headerlink" href="#useful-programs" title="Permalink to this headline">¶</a></h3>
<p>The running processes as well as the system usage can be shown with the command <code class="docutils literal notranslate"><span class="pre">htop</span></code>.<br />
Information about the CPU can be printed with <code class="docutils literal notranslate"><span class="pre">lscpu</span></code>.<br />
To install programs and libraries the <em>apt</em> package system is used:</p>
<ul class="simple">
<li><p>Update catalog of available programs: <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">update</span></code></p></li>
<li><p>Install a program/library: <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">program</span></code></p></li>
</ul>
<p>For further information refer to <a class="reference external" href="https://itsfoss.com/apt-command-guide/">APT Guide</a> or the man page.</p>
</section>
</section>
<hr class="docutils" />
<section id="references">
<h2>4. References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://ultra96.org/product/ultra96-v2-development-board">Ultra96-V2</a><br />
<a class="reference external" href="https://ultra96-pynq.readthedocs.io/en/latest/getting_started.html">PYNQ getting started</a></p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo.png" alt="Logo"/>
    
    <h1 class="logo logo-name">MPC Labs</h1>
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../lab_01_Setup_Laboratory/README.html">01 - Setup Laboratory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab_02_Process_Threads_Task_Decomposition/README.html">02 - Process, Threads, Task Decomposition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab_03_Data_Decomposition/README.html">03 - Data Decomposition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab_04_OpenMP/README.html">04 - OpenMP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab_05_SIMD/README.html">05 - Incremental computation of moments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab_06_Real-Time_with_SIMD_Open_MP/README.html">06 - Real-Time with SIMD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab_07_cluster_computing/README.html">07a - Cluster Computing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Ultra96-V2</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction-ultra96-v2">1. Introduction Ultra96-V2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#xilinx-zynq-ultrascale-mpsoc">Xilinx Zynq UltraScale+ MPSoC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ultra96-block-diagram">Ultra96 Block Diagram</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#setup">2. Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prepare-sd-card">2.1 Prepare SD card</a></li>
<li class="toctree-l3"><a class="reference internal" href="#connect-the-ultra96">2.2 Connect the Ultra96</a></li>
<li class="toctree-l3"><a class="reference internal" href="#boot-linux-from-sd-card">2.3 Boot Linux from SD-card</a></li>
<li class="toctree-l3"><a class="reference internal" href="#access-the-ultra96-v2">2.4 Access the Ultra96-V2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#access-the-ultra96-files">2.5 Access the Ultra96 files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#first-steps">3. First steps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hello-world">3.1 Hello, World!</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-code">Example code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-makefile">Example Makefile</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#useful-programs">3.2 Useful programs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#references">4. References</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../lab_07_cluster_computing/README.html" title="previous chapter">07a - Cluster Computing</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, stsh.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/appendix/appendix_u96.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>